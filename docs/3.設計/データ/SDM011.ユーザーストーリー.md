# アクターストーリー 論理モデル

- バージョン: 1
- 英語名: UserStory

## 概要

- アクターストーリーはアクター要求やシナリオを具体的に表現し、要件定義や設計の基礎となるモデル
- 拡張性：新しいストーリーや属性の追加が容易
- 整合性：IDは一意, nanoidを使用する、関連モデルとの参照整合性を担保

## エンティティ：アクターストーリー

| 属性名           | 型                           | 説明                     | 制約         |
| ---------------- | ---------------------------- | ------------------------ | ------------ |
| id               | string                       | アクターストーリーID     | 主キー、一意 |
| title            | string                       | タイトル                 | 必須         |
| normalFlow       | フロー                       | 正常フロー               | 必須         |
| alternativeFlow  | 代替フロー                   | 代替フロー               | 必須         |
| workRules        | 作業規則リスト               | 作業規則                 | 必須         |
| frequency        | string                       | 頻度                     | 必須         |
| cost             | string                       | 発生コスト               | 必須         |
| concerns         | 懸念リスト                   | 懸念点                   | 必須         |
| version          | string                       | 対応バージョン           | 必須         |
| userRequestIds   | array<int, UserRequest.id>   | アクター要求IDリスト     | 必須         |
| userId           | User.id                      | アクターID               | 必須         |
| envIds           | array<int, UserEnv.id>       | アクター環境IDリスト     | 必須         |
| deviceIds        | array<int, UserDevice.id>    | アクター利用端末IDリスト | 必須         |
| useStatusIds     | array<int, UserUseStatus.id> | アクター利用状況IDリスト | 必須         |
| domainId         | Domain.id                    | ドメインID               | 必須         |
| implDifficultyId | ImplDifficulty.id            | 実現難易度ID             | 必須         |
| createdAt        | datetime_tz                  | 作成日時                 | 必須         |
| updatedAt        | datetime_tz                  | 更新日時                 | 任意         |
| schemaVer        | int                          | スキーマバージョン       | 必須         |

## サブエンティティ：フロータスク

| 属性名      | 型                 | 説明          | 制約 |
| ----------- | ------------------ | ------------- | ---- |
| description | string             | 内容説明      | 必須 |
| flowIds     | array<int, string> | 関連フローIDs | 必須 |

## サブエンティティ：正常フロー

| 属性名 | 型                       | 説明   | 制約 |
| ------ | ------------------------ | ------ | ---- |
| flow   | array<int, フロータスク> | フロー | 必須 |

## サブエンティティ：代替フロー

| 属性名 | 型                       | 説明   | 制約       |
| ------ | ------------------------ | ------ | ---------- |
| id     | string                   | 代替名 | 必須, 一意 |
| name   | string                   | 代替名 | 必須       |
| flow   | array<int, フロータスク> | フロー | 必須       |

## サブエンティティ：作業規則

| 属性名      | 型     | 説明     | 制約 |
| ----------- | ------ | -------- | ---- |
| description | string | 内容説明 | 必須 |

## サブエンティティ：作業規則リスト

| 属性名 | 型                   | 説明     | 制約 |
| ------ | -------------------- | -------- | ---- |
| list   | array<int, 作業規則> | 作業規則 | 必須 |

## サブエンティティ：懸念

| 属性名      | 型     | 説明     | 制約 |
| ----------- | ------ | -------- | ---- |
| description | string | 内容説明 | 必須 |

## サブエンティティ：懸念リスト

| 属性名 | 型               | 説明   | 制約 |
| ------ | ---------------- | ------ | ---- |
| list   | array<int, 懸念> | 懸念点 | 必須 |
