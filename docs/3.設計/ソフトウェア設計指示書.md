# ソフトウェア設計指示書

## 1. 設計書類の配置構成

```
docs/3.設計/
├─ {ユースケースID}.{ユースケース名}/
│   ├─ 画面.md
│   └─ サーバーサイド.md
├─ データ/
│   └─ {データモデルID}.{データモデル名}.md
```

## 2. 設計原則（優先順位付き）

1. 単一責任の原則（SRP）
2. オープン・クローズドの原則（OCP）
3. リスコフの置換原則（LSP）
4. インターフェース分離の原則（ISP）
5. 依存性逆転の原則（DIP）

## 3. セキュリティ

### 3.1. データモデルにおけるセキュリティ

- アクセス制御：データごとにアクセス権限を明確化し、不要な権限付与を避ける（最小権限の原則）
- データ整合性：不正なデータ改ざんや消失を防ぐためのバリデーション、トランザクション管理
- データ暗号化：機密性の高いデータは保存時・転送時ともに暗号化を行う
- ログ管理：データ操作履歴を記録し、不正アクセスや操作の追跡を可能にする

### 3.2. サーバーサイドにおけるセキュリティ

- 多層防御：認証・認可、入力値検証、APIレートリミット、WAF等による多層的な防御
- サービスへのアクセス制限：不要なサービスやポートの無効化、ファイアウォール設定
- 境界面の最小化：外部公開APIや管理画面など攻撃対象となるインターフェースを最小限にし、アクセス制御・監視を徹底
- 脆弱性対策：CSRF/XSS/SQLインジェクション等の対策、依存ライブラリの定期的なアップデート
- ログ・監査：不正アクセスや異常操作の検知・通知、証跡の保存

### 3.3. 画面（フロントエンド）におけるセキュリティ

- 入力値バリデーション：クライアント側でも入力値の検証を行い、不正データの送信を防止
- セッション管理：セッションハイジャックや固定化攻撃への対策（セッションタイムアウト、トークンの安全な管理）
- XSS対策：出力時のエスケープ処理、危険なスクリプトの排除
- 権限に応じたUI制御：利用者の権限に応じて表示・操作可能な画面要素を制御
- エラーハンドリング：詳細なエラー情報を画面に表示せず、攻撃者への情報漏洩を防ぐ

## 4. 設計特性

### 4.1. データモデルへの適用

- 障害許容性・復元性：データの冗長化、バックアップ設計、トランザクション管理
- 拡張性：新規属性追加やモデル拡張が容易な設計
- 使用性：分かりやすい命名・構造・型定義・属性設計・ドキュメント化
- 性能：インデックス設計、検索効率化
- 整合性・正確性：バリデーションルール、参照整合性、誤入力や誤解を防ぐ設計
- 利用者の認知負荷を減らすための分かりやすい設計
- 利用者の業務・行動・目的に沿ったデータ構造（アクター属性・利用状況・目的などの明確なモデル化）
- 利用者の操作履歴やフィードバックを記録できる設計（改善・分析に活用）

### 4.2. サーバーサイドへの適用

- アベイラビリティ・障害復旧：冗長化、フェイルオーバー、監視、障害復旧設計
- 障害許容性・復元性：例外処理、リトライ、ログ管理、分かりやすいフィードバック・リカバリ手段
- 拡張性：モジュール化、API設計、SOLID原則
- 使用性：RESTful設計、分かりやすいエラーメッセージ、利用者の行動・業務フローに沿ったAPI設計
- 性能：非同期処理、キャッシュ、負荷分散
- セキュリティ・アクセス制御：認証認可、CSRF/XSS対策、最小権限、利用者の権限・役割に応じたアクセス制御

### 4.3. 画面（フロントエンド）への適用

- 使用性：UI/UX設計、アクセシビリティ、入力補助、直感的な操作、分かりやすいラベル・説明
- 拡張性：コンポーネント設計、再利用性
- 性能：レスポンス速度、遅延読み込み
- 障害許容性：エラー表示、入力値バリデーション
- 移植性：レスポンシブデザイン、マルチブラウザ対応、利用者の環境（端末・場所・利用状況）への適応
- アクセシビリティ配慮（色覚・視覚・操作性など多様な利用者に対応）
- 利用者の入力ミスを防ぐガイド・補助機能（入力補完、リアルタイムバリデーション）
- 利用者のフィードバックを即時に反映（エラー表示、操作結果通知）

## 5. 技術スタック

- PHP 8.4
- Laravel 12 (Inertia)
- React 19

## 6. 作業に必要なツール・申請・準備

- Git
- Docker
- エディタ（VS Code等）
- 必要に応じて各種アカウント申請・権限申請
